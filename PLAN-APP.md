# Meal Tracker App - План Розробки

## Опис Проекту

**Мета:** Додаток для iPhone який відстежує прийоми їжі з push-повідомленнями та фінансовим підрахунком.

**Ключова концепція - Період:**
- Створюєш період (напр. "Осінній семестр": 18.08 - 20.12)
- Налаштовуєш розклад для кожного дня тижня
- Notifications працюють ТІЛЬКИ в межах періоду
- Немає активного періоду = немає notifications

**Валюта:** PLN (zł)

---

## Ціни (фіксовані)

| Прийом їжі | Ціна |
|------------|------|
| Сніданок | 5 zł |
| Обід | 10 zł |
| Вечеря | 7 zł (дефолт) або 10 zł (альтернатива) |

---

## Прогрес

### Етап 1: Тестовий додаток ✅ ЗАВЕРШЕНО

### Етап 2: MVP ✅ ЗАВЕРШЕНО
- Головний екран з датою і MealCard компонентами
- SQLite база даних
- Notifications з кнопками

### Етап 3: Повна функціональність 🔄 В ПРОЦЕСІ
- [x] Навігація (tabs): Головна | Звіт | Налаштування
- [x] Екран Звіту:
  - [x] Вибір діапазону дат (календар)
  - [x] Дефолт: 16 минулого - 15 поточного
  - [x] Список днів з ✅/❌
  - [x] Загальна сума
  - [ ] Експорт в Excel (placeholder готовий)
- [ ] **Екран Налаштувань:**
  - [ ] Створення/редагування періоду
  - [ ] Розклад для кожного дня тижня
  - [ ] Вимкнення окремих днів

### Етап 4: Polish
- [ ] Іконка додатку
- [ ] Splash screen
- [ ] Бекап/Відновлення даних
- [ ] Production build

---

## Екрани Додатку

### 1. Головний екран
```
┌─────────────────────────────────┐
│     ←   8 грудня 2024   →      │
├─────────────────────────────────┤
│ 🌅 Сніданок    ✅ Їв     5 zł  │
├─────────────────────────────────┤
│ 🌞 Обід        ❌ Не їв  0 zł  │
├─────────────────────────────────┤
│ 🌙 Вечеря      ✅ Їв           │
│                ○ 7zł  ● 10zł   │
├─────────────────────────────────┤
│ Всього:               15 zł    │
└─────────────────────────────────┘
```
- Стрілки для переходу між днями
- Не можна перейти в майбутнє
- Натискання на прийом їжі змінює статус

### 2. Екран Звіту
```
┌────────────────────────────────────┐
│  16.11.2024 - 15.12.2024 [змінити] │
├────────────────────────────────────┤
│ 16.11.2024   ✅   ✅   ✅   22 zł │
│ 17.11.2024   ✅   ❌   ✅   12 zł │
│ 18.11.2024   ❌   ✅   ✅   17 zł │
│ ...                                │
├────────────────────────────────────┤
│ Всього:                   542 zł  │
│              [Експорт в Excel]    │
└────────────────────────────────────┘
```

### 3. Екран Налаштувань
```
┌─────────────────────────────────┐
│ ПОТОЧНИЙ ПЕРІОД                 │
│ 18.08.2024 - 20.12.2024 [змінити]│
├─────────────────────────────────┤
│ РОЗКЛАД                         │
│ Понеділок:                      │
│   Сніданок: 07:30              │
│   Обід:     13:00              │
│   Вечеря:   19:00              │
│ Вівторок:                       │
│   ...                           │
├─────────────────────────────────┤
│ ВИМКНЕНІ ДНІ                    │
│ [Календар для вибору]           │
│ 10.12.2024 ❌                   │
│ 15.12.2024 ❌                   │
└─────────────────────────────────┘
```

---

## Notifications

### Типи повідомлень:

**1. Нагадування (за 5 хв до):**
```
🔔 Скоро сніданок!
[Ок]
```
- Просто закриває notification

**2. Основне (в час їжі):**
```
🍽️ Сніданок! Ти їв?
[✅ Їв]  [❌ Не їв]
```
- Натискання зберігає в базу даних

**Для вечері:**
```
🍽️ Вечеря! Ти їв?
[✅ 7 zł]  [✅ 10 zł]  [❌ Не їв]
```

---

## База Даних (SQLite)

### Таблиця: periods (періоди)
| Поле | Тип | Опис |
|------|-----|------|
| id | INTEGER | Primary key |
| name | TEXT | Назва (опційно) |
| start_date | TEXT | Початок (2024-08-18) |
| end_date | TEXT | Кінець (2024-12-20) |
| is_active | BOOLEAN | Чи активний |

### Таблиця: schedule (розклад)
| Поле | Тип | Опис |
|------|-----|------|
| id | INTEGER | Primary key |
| period_id | INTEGER | Foreign key → periods |
| day_of_week | INTEGER | 0=Нд, 1=Пн, ..., 6=Сб |
| meal_type | TEXT | breakfast/lunch/dinner |
| time | TEXT | Час (07:30) |

### Таблиця: meal_entries (записи їжі)
| Поле | Тип | Опис |
|------|-----|------|
| id | INTEGER | Primary key |
| period_id | INTEGER | Foreign key → periods |
| date | TEXT | Дата (2024-12-08) |
| meal_type | TEXT | breakfast/lunch/dinner |
| ate | BOOLEAN | Їв чи ні |
| price | REAL | Ціна (0 якщо не їв) |
| created_at | TIMESTAMP | Коли створено |

### Таблиця: disabled_days (вимкнені дні)
| Поле | Тип | Опис |
|------|-----|------|
| id | INTEGER | Primary key |
| period_id | INTEGER | Foreign key → periods |
| date | TEXT | Дата яка вимкнена |

---

## Структура Проекту

```
TrackerFood/
├── App.tsx
├── src/
│   ├── screens/
│   │   ├── HomeScreen.tsx      # Головний екран (день)
│   │   ├── ReportScreen.tsx    # Звіт з календарем
│   │   └── SettingsScreen.tsx  # Налаштування періоду
│   ├── components/
│   │   ├── MealCard.tsx        # Картка прийому їжі
│   │   ├── DateNavigator.tsx   # Стрілки ← дата →
│   │   └── CalendarPicker.tsx  # Вибір дат
│   ├── services/
│   │   ├── database.ts         # SQLite операції
│   │   ├── notifications.ts    # Логіка notifications
│   │   └── export.ts           # Експорт в Excel
│   └── types/
│       └── index.ts            # TypeScript типи
├── ios/
├── package.json
└── tsconfig.json
```

---

## Технічні Деталі

**Bundle Identifier:** `com.rdk-oleh.trackerfood`

**Пакети:**
- expo-notifications - повідомлення
- expo-device - інформація про пристрій
- expo-sqlite - локальна база даних
- @react-navigation/native - навігація
- @react-navigation/bottom-tabs - tabs внизу
- xlsx + expo-sharing + expo-file-system - експорт

---

## Запуск

### Development
```bash
cd /Users/rdk/Work/TrackerFood
npx expo start
# + Xcode ▶️
```

### Production
```bash
npx expo run:ios --configuration Release
# або Xcode: Product → Archive
```

---

## Наступний Крок

**Зараз:** Етап 2 - SQLite + Головний екран + Notifications з кнопками
